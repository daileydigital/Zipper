<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NHL Live ‚Äì Last Digit</title>
<style>

body {

    font-family: Arial, sans-serif;

    background: #0b132b;

    color: #f8f9fa;

    margin: 0;

    padding: 12px;

}

h1 {

    text-align: center;

    font-size: 1.4rem;

}

.game {

    background: #1c2541;

    border-radius: 12px;

    padding: 16px;

    margin-bottom: 12px;

    display: flex;

    justify-content: space-between;

    align-items: center;

    transition: background-color 0.6s;

}

.flash {

    background: #2ec4b6 !important;

    color: #0b132b;

}

.teams {

    font-size: 0.95rem;

}

.digit {

    font-size: 3rem;

    font-weight: bold;

}

.status {

    font-size: 0.8rem;

    color: #cbd5e1;

}
</style>
</head>
<body>
<h1>üèí NHL Live ‚Äì Last Digit</h1>
<div id="games">Loading‚Ä¶</div>
<script>

const API_URL =

  "https://site.web.api.espn.com/apis/v2/sports/hockey/nhl/scoreboard";

const POLL = 30000; // 30 seconds

const prev = {};   // gameId -> last digit

async function load() {

    try {

        const res = await fetch(API_URL);

        const data = await res.json();

        const container = document.getElementById("games");

        container.innerHTML = "";

        const live = data.events.filter(e =>

            e.competitions[0].status.type.state === "in"

        );

        if (!live.length) {

            container.innerText = "No live NHL games.";

            return;

        }

        live.forEach(e => {

            const comp = e.competitions[0];

            const teams = comp.competitors;

            const home = teams.find(t => t.homeAway === "home");

            const away = teams.find(t => t.homeAway === "away");

            const totalScore =

                parseInt(home.score || 0) +

                parseInt(away.score || 0);

            const digit = totalScore % 10;

            const div = document.createElement("div");

            div.className = "game";

            if (prev[e.id] !== undefined && prev[e.id] !== digit) {

                div.classList.add("flash");

                setTimeout(() => div.classList.remove("flash"), 1500);

            }

            prev[e.id] = digit;

            div.innerHTML = `
<div class="teams">

                ${away.team.displayName} @ ${home.team.displayName}
<div class="status">

                  ${comp.status.type.shortDetail}
</div>
</div>
<div class="digit">${digit}</div>

            `;

            container.appendChild(div);

        });

    } catch (err) {

        document.getElementById("games").innerText =

            "Error loading NHL scores.";

        console.error(err);

    }

}

load();

setInterval(load, POLL);
</script>
</body>
</html>
 
