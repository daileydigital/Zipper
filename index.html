<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sports Last Digit Board</title>
<style>

body {

    font-family: Arial, sans-serif;

    background: #0b132b;

    color: #f8f9fa;

    margin: 0;

    padding: 12px;

}

.tabs {

    display: flex;

    justify-content: center;

    margin-bottom: 12px;

}

.tab {

    padding: 8px 16px;

    margin: 0 4px;

    border-radius: 8px;

    background: #1c2541;

    cursor: pointer;

}

.tab.active {

    background: #2ec4b6;

    color: #0b132b;

}

h2 {

    font-size: 1.1rem;

    margin: 14px 0 6px;

    border-bottom: 1px solid #334155;

    padding-bottom: 4px;

}

.schedule {

    background: #111827;

    border-radius: 10px;

    padding: 10px;

    margin-bottom: 16px;

}

.schedule-game {

    display: flex;

    justify-content: space-between;

    font-size: 0.85rem;

    padding: 6px 0;

    border-bottom: 1px solid #1f2933;

}

.schedule-game:last-child {

    border-bottom: none;

}

.network {

    color: #93c5fd;

}

.game {

    background: #1c2541;

    border-radius: 12px;

    padding: 16px;

    margin-bottom: 12px;

    display: flex;

    justify-content: space-between;

    align-items: center;

    transition: background-color 0.6s;

}

.flash {

    background: #fbbf24 !important;

    color: #0b132b;

}

.digit {

    font-size: 3rem;

    font-weight: bold;

}

.status {

    font-size: 0.8rem;

    color: #cbd5e1;

}

.hidden { display: none; }
</style>
</head>
<body>
<div class="tabs">
<div class="tab active" onclick="show('nfl')">üèà NFL</div>
<div class="tab" onclick="show('nhl')">üèí NHL</div>
</div>
<div id="nfl">
<h2>NFL Schedule (Pacific Time)</h2>
<div class="schedule" id="nflSchedule">Loading‚Ä¶</div>
<h2>Live NFL ‚Äì Last Digit</h2>
<div id="nflLive">Loading‚Ä¶</div>
</div>
<div id="nhl" class="hidden">
<h2>NHL Schedule (Pacific Time)</h2>
<div class="schedule" id="nhlSchedule">Loading‚Ä¶</div>
<h2>Live NHL ‚Äì Last Digit</h2>
<div id="nhlLive">Loading‚Ä¶</div>
</div>
<script>

const APIs = {

  nfl: "https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard",

  nhl: "https://site.api.espn.com/apis/site/v2/sports/hockey/nhl/scoreboard"

};

const prev = {};

function show(id) {

    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));

    document.querySelectorAll("#nfl,#nhl").forEach(d => d.classList.add("hidden"));

    document.getElementById(id).classList.remove("hidden");

    document.querySelector(`.tab[onclick="show('${id}')"]`).classList.add("active");

}

function pacific(iso) {

    const d = new Date(iso);

    return d.toLocaleDateString("en-US", {

        timeZone: "America/Los_Angeles",

        weekday: "short",

        hour: "numeric",

        minute: "2-digit"

    });

}

async function load(league) {

    try {

        const res = await fetch(APIs[league]);

        const data = await res.json();

        const sched = document.getElementById(league + "Schedule");

        const live = document.getElementById(league + "Live");

        sched.innerHTML = "";

        live.innerHTML = "";

        let hasLive = false;

        data.events?.forEach(e => {

            const c = e.competitions?.[0];

            if (!c) return;

            const h = c.competitors.find(t => t.homeAway === "home");

            const a = c.competitors.find(t => t.homeAway === "away");

            if (!h || !a) return;

            const nets = c.broadcasts?.map(b => b.name).filter(Boolean).join(", ") || "TBD";

            sched.innerHTML += `
<div class="schedule-game">
<div>${a.team.abbreviation} @ ${h.team.abbreviation}</div>
<div>${pacific(e.date)} <span class="network">(${nets})</span></div>
</div>

            `;

            if (c.status?.type?.state === "in") {

                hasLive = true;

                const digit = ((+h.score || 0) + (+a.score || 0)) % 10;

                const key = league + e.id;

                const div = document.createElement("div");

                div.className = "game";

                if (prev[key] !== undefined && prev[key] !== digit) {

                    div.classList.add("flash");

                    setTimeout(() => div.classList.remove("flash"), 1500);

                }

                prev[key] = digit;

                div.innerHTML = `
<div>

                    ${a.team.displayName} @ ${h.team.displayName}
<div class="status">${c.status.type.shortDetail}</div>
</div>
<div class="digit">${digit}</div>

                `;

                live.appendChild(div);

            }

        });

        if (!sched.innerHTML) sched.innerText = "No games scheduled.";

        if (!hasLive) live.innerText = "No live games right now.";

    } catch {

        document.getElementById(league + "Schedule").innerText = "Error loading schedule.";

        document.getElementById(league + "Live").innerText = "Error loading live games.";

    }

}

load("nfl");

load("nhl");

setInterval(() => { load("nfl"); load("nhl"); }, 30000);
</script>
</body>
</html>
 
